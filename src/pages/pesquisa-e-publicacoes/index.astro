---
import InsideLayout from "@layouts/InsideLayout.astro"
import H1TitleWithLine from "@components/H1TitleWithLine.astro"
import PesquisaEPublicacoesIndex from "@components/PesquisaEPublicacoesIndex.astro"
import { getCollection } from "astro:content"

const pesquisa = (
  await getCollection("pesquisa", ({ data }) => {
    return data.rascunho !== true
  })
).sort(
  (a, b) =>
    b.data.data_da_publicacao.valueOf() - a.data.data_da_publicacao.valueOf(),
)

const canonicalURL = new URL(Astro.url.pathname, Astro.site)
const title = "Pesquisa e publicações"
---

<InsideLayout
  title={title}
  description="As pesquisas desenvolvidas no contexto do projeto incluem a participação em eventos acadêmicos, experimentações tipográficas e publicações."
  canonicalURL={canonicalURL}
>
  <H1TitleWithLine title={title} />
  <PesquisaEPublicacoesIndex content={pesquisa} />
</InsideLayout>
