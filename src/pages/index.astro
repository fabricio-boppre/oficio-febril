---
import { css } from "@styled-system/css"
import { flex } from "@styled-system/patterns"
import BasicLayout from "../layouts/BasicLayout.astro"
import HeaderTitle from "@components/HederTitle.astro"
import NavMenu from "@components/NavMenu.astro"
import { getCollection } from "astro:content"

const allCliches = await getCollection("cliches")

const allCliches2 = await getCollection("cliches2")

console.log(allCliches2[0].data)
---

<BasicLayout title="página inicial">
  <header
    class={flex({
      minH: "calc(100vh - var(--spacing-header-and-footer-y-margin))",
      layerStyle: "headerLayout",
    })}
  >
    <HeaderTitle />
    <NavMenu />
    <div
      id="cliche"
      class={flex({
        maxW: "maxWidth",
        alignItems: "center",
        justifyContent: "center",
        m: "0 auto",
        p: "20px",
        flex: "1 0 auto",
      })}
    >
    </div>
  </header>
  <main class={css({ layerStyle: "mainLayout" })}>
    <div class={css({ bgColor: "green" })}>
      <h1
        class={css({
          fontSize: "3rem",
        })}
      >
        Destaques
      </h1>
    </div>
    <div class={css({ bgColor: "blue" })}>
      <h1
        class={css({
          fontSize: "3rem",
        })}
      >
        As últimas
      </h1>
    </div>
    <div class={css({ bgColor: "orange" })}>
      <h1
        class={css({
          fontSize: "3rem",
        })}
      >
        Artistas
      </h1>
    </div>

    <slot />
  </main>
</BasicLayout>

<script define:vars={{ allCliches2 }}>
  var randomCliche = allCliches2[Math.floor(Math.random() * allCliches2.length)]
  const clicheImgDiv = document.getElementById("cliche")
  var img = document.createElement("img")
  img.src = randomCliche.data.imagem.src
  img.alt = randomCliche.data.titulo + ", " + randomCliche.data.descricao
  clicheImgDiv.appendChild(img)
</script>
